# Il Modello Relazionale

- la **tabella** è la struttura dati fondamentale
- con le tabelle si rappresentatno le **_entità_** e le **_relazioni_** del modello concettuale
  - **_Diagramma E-R_**: modello concettuale che utilizza le entità e relazioni
- la tabella è costituita da:
  - **_attributi_**: campi/colonne
  - **_tuple_**: record/righe
- ogni campo/colonna rappresenta un attributo dell'entità/relazione
- per ogni attributo viene stabilito un suo **_dominio_** (tipo di dato): alfanumerico, numerico, data, etc.
- ogni record rappresenta un'**_istanza_** (occorrenza)
- garantisce l'integrità referenziale

## Simboli Diagramma E-R

### Entità

elemento fondamentale che rappresenta **_classi di oggetti_** (fatti, cose, persone, etc) che hanno

- **_proprietà comuni_**
- **_esistenza autonoma_**
- identificato da un rettangolo<br><br>
  ![entita](/img/er_entita.jpg) <br>

### Attributi

Caratteristiche specifiche di un’entità, utili (o necessarie) nella realtà da
modellare

- identificata da un cerchio collegato all’entità<br><br>
  ![attributi](/img/er_attributi.jpg) <br>

### Chiave Primaria

L’insieme di attributi che garantisce l’univocità delle istanze di un’entità è detta: Chiave Primaria.
È indicata come: PRIMARY KEY o PK

- Identificata graficamente con un cerchio pieno
  collegato all’entità e relativo nome attributo sottolineato<br><br>
  ![primary_key](/img/er_primary_key.jpg) <br>

Caratteristiche:

- L’insieme dei campi i cui valori identificano univocamente un record all’interno di una tabella è detto
  Chiave Primaria. Quando la chiave primaria è composta da un solo campo, si parla di **_campo chiave_**.
- Quando non è possibile trovare un campo chiave tra gli attributi di una entità, si definisce un campo
  univoco di tipo **_numerico_** che si auto-incrementa (contatore): ID (identifier).<br><br>
  Esempi di campo chiave: matricola, codice fiscale, etc.

### Istanze di un’Entità

Specifici dati, oggetti appartenenti ad un’entità

- non sono rappresentate nel Diagramma E-R
  ma si intendono contenute in ogni entità:
- Carlo Rossi, via Verdi è un’istanza
  dell’entità ALUNNO (attributi: Nome, Cognome, Indirizzo)<br><br>
  ![istanza](/img/er_istanza.jpg) <br>

Possiamo considerare le entità come insiemi all’interno
dei quali sono contenuti oggetti (le istanze) ciascuno
con specifiche caratteristiche (valore degli attributi).<br><br>
![insieme](/img/er_istanze_insieme.jpg) <br>

### Relazioni (Associazioni)

Collegamenti logici che uniscono due o più entità nella realtà descritta dal database

- identificata da un rombo collegato alle due entità:<br><br>
  ![relazione](/img/er_relazione.jpg) <br>

### Cardinalità delle relazioni

La relazione R che lega due entità E1 ed E2 può essere classificata in base alla sua
cardinalità (quante istanze delle due entità sono coinvolte nella relazione):

- **_1,1_** (uno a uno)
  - se ad un elemento di E1 può corrispondere un solo elemento di E2
- **_1,N_** (uno a molti)
  - se ad un elemento di E1 possono corrispondere più di un
    elemento di E2 , ad un elemento di E2 può corrispondere un solo elemento di E1
- **_N,N_** (molti a molti)
  - se ad ogni elemento di E1 possono corrispondere molti
    elementi di E2 e viceversa <br><br>

#### Relazione 1,1 (uno a uno):

Cinema/teatro<br>
![cinema](/img/er_relazione_cinema.jpg) <br>

- Uno spettatore occupa un singolo posto
- Ogni singolo posto può essere occupato solo da uno spettatore

#### Relazione 1,N (uno a molti):

Liceo/Scuola superiore<br>
![scuola](/img/er_relazione_scuola.jpg) <br>

- Ad ogni classe appartiene più di un alunno
- Un alunno appartiene ad una singola classe

#### Relazione N,N (molti a molti):

Università<br>
![universita](/img/er_relazione_universita.jpg) <br>

- Uno studente frequenta più corsi
- Ogni corso è frequentato da molti studenti

#### Esempi

![esempi](/img/er_relazione_esempi.jpg) <br>

#### Esempio

Database per una applicazione web che gestisce l'acquisto di corsi.

- Disegnare una base dati per la gestione dell'acquisto di corsi offerti da una piattaforma web.
- Gli utenti/studenti devono essere registrati sulla piattaforma, per registrarsi occorre nome, cognome ed email. Viene
  memorizzata anche la data di registrazione.
- Gli studenti/utenti possono acquistare molti corsi. I corsi sono quindi a pagamento. Viene memorizzata anche la data
  di acquisto.
- Il prezzo del corso può variare nel tempo.
- I corsi si riferiscono a svariate materie quali: Java, Base di programmazione, Html, CSS, CMS, Javascript, React, PHP…
  Ogni corso viene tenuto da un docente. Un docente può insegnare in molti corsi.
  <br><br>
  **_(soluzione sotto, non sbirciare!)_**
  <br><br><br><br><br><br><br><br>
  <br><br><br><br><br><br><br><br>
  <br><br><br><br><br><br><br><br>

#### Modello Concettuale (Diagramma E-R)

Gestionale acquisto corsi
![modello_concettuale](/img/er_modello_concettuale.jpg) <br><br>

#### Modello Logico

Simbologia delle relazioni
![modello_logico](/img/er_modello_logico.jpg) <br><br>

#### Tabelle

Rappresentazione dell’informazione in tabelle nel database secondo il modello relazionale dell’esempio relativo alla piattaforma corsi:<br>
Studenti<br>
|id|cognome|nome|email|
|-|-|-|
|1|esposito|giuseppe|esposito@email.it|<br>
|2|ponzio|carlo|ponzio@email.it|<br>
|3|conti|lorenzo|conti@email.it|<br>
|4|segre|paolo|segre@email.it|<br>
