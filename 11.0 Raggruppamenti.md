# Raggruppamenti

### DISTINCT
    SELECT DISTINCT column1, column2, ...
    FROM table_name;

    select DISTINCT cognome from studente; 
    select DISTINCT cognome from studente where cognome like 'v%' order by cognome; 

    SELECT COUNT(DISTINCT cognome) FROM studente;

    SELECT Count(*) AS DistinctCountries
    FROM (SELECT DISTINCT Country FROM Customers);

### GROUP BY 

    The GROUP BY viene spesso  usato con funzioni di aggregazione (COUNT(), MAX(), MIN(), SUM(), AVG()) per raggruppare gli elementi in una o più colonne.
    
    SELECT column_name(s)
    FROM table_name
    WHERE condition
    GROUP BY column_name(s)
    ORDER BY column_name(s); 

    select cognome from studente group by cognome order by cognome;

    select genere, count(genere) from studente group by genere;

    #->> perdo 2 record editore xè editore_id non è presente in libro
    select e.nome, count(e.nome)
    from libro l, editore e  
    where l.editore_id=e.id
    group by e.nome 
    order by e.nome asc;

    # età media studenti divisi x genere
    select genere, AVG(timestampdiff(YEAR, data_nascita, curdate())) 'eta media' 
    from studente
    group by genere;

    # media prezzo x editore
    select e.nome, round(avg(l.prezzo),2) 'prezzo medio' 
    from libro l, editore e 
    where l.editore_id=e.id 
    group by e.nome;

### Group by + HAVING

    SELECT column_name(s)
    FROM table_name
    WHERE condition
    GROUP BY column_name(s)
    HAVING condition
    ORDER BY column_name(s);

    select cognome, count(*) quanti 
    from studente 
    group by cognome HAVING quanti > 1
    order by quanti desc;

    # studenti raggrupati x genere e provincia
    # * ->> conta i record
    select provincia, genere, count(*) tot 
    from studente 
    group by genere, provincia having tot > 1
    order by provincia;

## Ordine Filtri (Attenzione!)
    select 
    from 
    where 
    group by ... having
    order by ;

    select provincia, genere, count(cognome) numero 
    from studente
    where provincia = 'to'
    group by genere having genere is not null;

# esercizio 
Group By